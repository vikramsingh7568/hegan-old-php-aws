(this["webpackJsonpreact-hegan-client"]=this["webpackJsonpreact-hegan-client"]||[]).push([[17],{582:function(e,t,n){"use strict";n.r(t);var r=n(20),c=n(24),a=n(7),i=n(4),s=n(2),o=n(15),l=n(14),d=n.n(l),u=n(551),j=n.n(u),b=n(28),h=n.n(b),x=n(5),p=n(538),g=n(432),O=n(35),f=n(533),m=n(534),v=n(494),w=n(535),y=n(539),P=n(540),_=n(541),k=n(542),I=n(522),S=n(445),C=n(574),T=n(54),B=n.n(T),D=n(57),F=n(1),R=Object(x.a)(p.a)((function(){return{}})),Y=Object(x.a)("div")((function(e){var t,n=e.theme;return t={margin:"30px"},Object(i.a)(t,n.breakpoints.down("sm"),{margin:"16px"}),Object(i.a)(t,"& .breadcrumb",Object(i.a)({marginBottom:"30px"},n.breakpoints.down("sm"),{marginBottom:"16px"})),t})),E=(Object(x.a)(g.a)((function(){return{height:"100%",padding:"32px",position:"relative"}})),Object(x.a)("small")((function(e){return{width:50,height:15,color:"#fff",padding:"5px 8px",borderRadius:"4px",overflow:"hidden",background:e.bgcolor,boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)",cursor:"pointer"}})));t.default=function(){var e=Object(O.a)().palette,t=e.error.main,n=e.primary.main,i=e.secondary.main,l=e.success.main,u=e.success.light,b=e.secondary.dark,x=Object(s.useState)(0),p=Object(a.a)(x,2),T=p[0],M=p[1],N=Object(s.useState)(20),z=Object(a.a)(N,2),A=z[0],J=z[1],U=Object(s.useState)(!1),V=Object(a.a)(U,2),W=V[0],q=V[1],G=Object(s.useState)(!1),H=Object(a.a)(G,2),K=(H[0],H[1]);Object(s.useEffect)((function(){L()}),[]);var L=function(){var e=Object(c.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.prev=1,e.next=4,d.a.get("/sanctum/csrf-cookie").then((function(e){d.a.post("/api/client/get-purchase-order-record").then((function(e){200===e.data.response_code?q(e.data.data):e.data.response_code,K(!1)})).catch((function(e){K(!1),console.error(e)}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),K(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(Y,{children:[Object(F.jsx)(g.a,{className:"breadcrumb",children:Object(F.jsx)(D.a,{routeSegments:[{name:"dashboard",path:"/dashboard"},{name:"Purchase"}]})}),Object(F.jsxs)(f.a,{title:"Purchase",children:[Object(F.jsx)(m.a,{title:"Purchase",titleTypographyProps:{variant:"h4",fontSize:"16px",fontWeight:"600",textTransform:"uppercase",textAlign:"center"}}),Object(F.jsx)(v.a,{}),Object(F.jsx)(w.a,{children:Object(F.jsxs)(g.a,{width:"100%",overflow:"auto",children:[Object(F.jsxs)(R,{sx:{minWidth:1e3},children:[Object(F.jsx)(y.a,{children:Object(F.jsxs)(P.a,{children:[Object(F.jsx)(_.a,{align:"left",sx:{width:"60px"},children:"Sr. No."}),Object(F.jsx)(_.a,{align:"center",children:"Order Id"}),Object(F.jsx)(_.a,{align:"center",children:"Total MRP"}),Object(F.jsx)(_.a,{align:"center",children:"Total Saving"}),Object(F.jsx)(_.a,{align:"center",children:"Total Payable"}),Object(F.jsx)(_.a,{align:"center",children:"Order Date"}),Object(F.jsx)(_.a,{align:"center",children:"Transaction Id"}),Object(F.jsx)(_.a,{align:"center",children:"Payment Status"}),Object(F.jsx)(_.a,{align:"center",children:"Status"}),Object(F.jsx)(_.a,{align:"center",sx:{width:"200px"},children:"Action"})]})}),Object(F.jsx)(k.a,{children:W?W.slice(T*A,T*A+A).map((function(e,a){return Object(F.jsxs)(P.a,{children:[Object(F.jsx)(_.a,{align:"center",children:a+1}),Object(F.jsx)(_.a,{align:"center",children:e.order_id}),Object(F.jsx)(_.a,{align:"center",children:e.total_mrp}),Object(F.jsx)(_.a,{align:"center",children:e.total_savings}),Object(F.jsx)(_.a,{align:"center",children:e.total_payable}),Object(F.jsx)(_.a,{align:"center",children:B()(e.created_at).format("DD/MM/YYYY")}),Object(F.jsx)(_.a,{align:"center",children:e.transaction_id?Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(E,{bgcolor:u,children:e.transaction_id})}):Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(E,{bgcolor:n,onClick:function(){return function(e,t){var n=function(){var e=Object(c.a)(Object(r.a)().mark((function e(){var c,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.fire({title:"Order Id: ".concat(t," "),focusConfirm:!1,html:'\n        <input class="swal2-input" id="transactionId" type="text" placeholder="Transaction Id..." style="width: 80%;"/><br />\n      ',icon:"success",showCancelButton:!0,cancelButtonColor:"grey",confirmButtonText:"Update!",confirmButtonColor:"green",allowOutsideClick:!1,preConfirm:function(){return{transactionId:document.getElementById("transactionId").value}}});case 2:if(c=e.sent,!((a=c&&c.value||c.dismiss)&&a.transactionId||"cancel"===a)){e.next=14;break}if(""!==a.transactionId){e.next=11;break}return e.next=8,j.a.fire({type:"error",title:"Transaction Id is required!"});case 8:n(),e.next=12;break;case 11:if("cancel"!==a&&c.isConfirmed)try{d.a.get("/sanctum/csrf-cookie").then((function(e){d.a.post("/api/client/update-order-trans-id",{order_id:t,transaction_id:c.value.transactionId}).then((function(e){if(200===e.data.response_code){var n=e.data.data;q(W.map((function(e){return e.order_id===t?n:e}))),h()({title:"Done!",text:e.data.message,icon:"success"})}else e.data.response_code,h()({title:"Errors!",text:e.data.message,icon:"error"});K(!1)})).catch((function(e){K(!1),console.error(e)}))}))}catch(r){K(!1)}case 12:e.next=17;break;case 14:return e.next=16,j.a.fire({icon:"error",title:"Please enter payment transaction Id!"});case 16:n();case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}(e.id,e.order_id)},children:"Update Trnx Id"})})}),Object(F.jsx)(_.a,{align:"center",children:function(){switch(e.payment_status){case"success":return Object(F.jsx)(E,{bgcolor:l,children:"Success"});case"pending":return Object(F.jsx)(E,{bgcolor:i,children:"Pending"});case"failed":return Object(F.jsx)(E,{bgcolor:t,children:"Failed"});default:return null}}()}),Object(F.jsx)(_.a,{align:"center",children:function(){switch(e.status){case"pending":return Object(F.jsx)(E,{bgcolor:i,children:"Pending"});case"failed":return Object(F.jsx)(E,{bgcolor:t,children:"Failed"});case"cancelled":return Object(F.jsx)(E,{bgcolor:t,children:"Cancelled"});case"completed":return Object(F.jsx)(E,{bgcolor:n,children:"Completed"});case"processing":return Object(F.jsx)(E,{bgcolor:u,children:"Processing"});case"ready_to_ship":return Object(F.jsx)(E,{bgcolor:u,children:"Ready To Ship"});case"shipped":return Object(F.jsx)(E,{bgcolor:u,children:"Shipped"});case"delivered":return Object(F.jsx)(E,{bgcolor:l,children:"Delivered"});case"return":return Object(F.jsx)(E,{bgcolor:b,children:"Return"});case"refund":return Object(F.jsx)(E,{bgcolor:b,children:"Refund"});default:return null}}()}),Object(F.jsxs)(_.a,{title:"View",align:"right",sx:{width:"200px"},children:[Object(F.jsx)(I.a,{component:o.b,to:"/dashboard/order-history/purchase-details/".concat(e.id),color:"primary",variant:"outlined",size:"small",sx:{m:.5},children:"View"}),Object(F.jsx)(I.a,{title:"Delete",onClick:function(t){return n=e.id,r=e.order_id,void h()({title:"Are you sure?",text:'You want to cancel "'+r+'" order!',icon:"warning",buttons:["No, cancel it!","Yes, I am sure!"],dangerMode:!0}).then((function(e){if(e)try{d.a.get("/sanctum/csrf-cookie").then((function(e){d.a.post("/api/client/cancel-order",{row_id:n}).then((function(e){if(200===e.data.response_code){var t=e.data.data;q(W.map((function(e){return e.order_id===r?t:e}))),h()({title:"Done!",text:e.data.message,icon:"success"})}else e.data.response_code,h()({title:"Errors!",text:e.data.message,icon:"error"});K(!1)})).catch((function(e){K(!1),console.error(e)}))}))}catch(t){K(!1)}}));var n,r},color:"error",variant:"outlined",size:"small",sx:{m:.5},children:"Order Cancel"})]})]},a)})):Object(F.jsx)(P.a,{children:Object(F.jsx)(_.a,{align:"center",colSpan:10,children:Object(F.jsx)(S.a,{})})})})]}),W?Object(F.jsx)(C.a,{sx:{px:2},page:T,component:"div",rowsPerPage:A,count:W.length,onPageChange:function(e,t){M(t)},rowsPerPageOptions:[5,10,25],onRowsPerPageChange:function(e){J(+e.target.value),M(0)},nextIconButtonProps:{"aria-label":"Next Page"},backIconButtonProps:{"aria-label":"Previous Page"}}):Object(F.jsx)(F.Fragment,{})]})})]})]})})}}}]);
//# sourceMappingURL=17.b8f69dcc.chunk.js.map