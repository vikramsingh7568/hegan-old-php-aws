(this["webpackJsonpreact-hegan-client"]=this["webpackJsonpreact-hegan-client"]||[]).push([[10],{590:function(e,t,n){"use strict";n.r(t);var r=n(20),c=n(24),a=n(7),i=n(4),o=n(2),s=n(15),d=n(14),l=n.n(d),u=n(551),h=n.n(u),p=n(28),b=n.n(p),j=n(5),x=n(538),g=n(432),f=n(35),m=n(533),O=n(534),v=n(494),_=n(535),w=n(539),k=n(540),y=n(541),P=n(542),C=n(522),I=n(445),B=n(574),S=n(54),R=n.n(S),T=n(57),E=n(1),D=Object(j.a)(x.a)((function(){return{}})),F=Object(j.a)("div")((function(e){var t,n=e.theme;return t={margin:"30px"},Object(i.a)(t,n.breakpoints.down("sm"),{margin:"16px"}),Object(i.a)(t,"& .breadcrumb",Object(i.a)({marginBottom:"30px"},n.breakpoints.down("sm"),{marginBottom:"16px"})),t})),Y=(Object(j.a)(g.a)((function(){return{height:"100%",padding:"32px",position:"relative"}})),Object(j.a)("small")((function(e){return{width:50,height:15,color:"#fff",padding:"5px 8px",borderRadius:"4px",overflow:"hidden",background:e.bgcolor,boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)",cursor:"pointer"}})));t.default=function(){var e=Object(f.a)().palette,t=e.error.main,n=e.primary.main,i=e.secondary.main,d=e.success.main,u=e.success.light,p=e.secondary.dark,j=Object(o.useState)(0),x=Object(a.a)(j,2),S=x[0],z=x[1],M=Object(o.useState)(20),N=Object(a.a)(M,2),A=N[0],J=N[1],U=Object(o.useState)(!1),V=Object(a.a)(U,2),W=V[0],q=V[1],G=Object(o.useState)(!1),H=Object(a.a)(G,2),K=(H[0],H[1]);Object(o.useEffect)((function(){L()}),[]);var L=function(){var e=Object(c.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.prev=1,e.next=4,l.a.get("/sanctum/csrf-cookie").then((function(e){l.a.post("/api/client/get-purchase-order-record").then((function(e){200===e.data.response_code?q(e.data.data):e.data.response_code,K(!1)})).catch((function(e){K(!1),console.error(e)}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),K(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),Q=function(e,t){b()({title:"Are you sure?",text:'You want to cancel "'+t+'" order!',icon:"warning",buttons:["No, cancel it!","Yes, I am sure!"],dangerMode:!0}).then((function(t){if(t)try{l.a.get("/sanctum/csrf-cookie").then((function(t){l.a.post("/api/client/cancel-order",{row_id:e}).then((function(t){if(200===t.data.response_code){var n=t.data.data;q(W.map((function(t){return t.id===e?n:t}))),b()({title:"Done!",text:t.data.message,icon:"success"})}else t.data.response_code,b()({title:"Errors!",text:t.data.message,icon:"error"});K(!1)})).catch((function(e){K(!1),console.error(e)}))}))}catch(n){K(!1)}}))};return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(F,{children:[Object(E.jsx)(g.a,{className:"breadcrumb",children:Object(E.jsx)(T.a,{routeSegments:[{name:"dashboard",path:"/dashboard"},{name:"Purchase"}]})}),Object(E.jsxs)(m.a,{title:"Purchase",children:[Object(E.jsx)(O.a,{title:"Purchase",titleTypographyProps:{variant:"h4",fontSize:"16px",fontWeight:"600",textTransform:"uppercase",textAlign:"center"}}),Object(E.jsx)(v.a,{}),Object(E.jsx)(_.a,{children:Object(E.jsxs)(g.a,{width:"100%",overflow:"auto",children:[Object(E.jsxs)(D,{sx:{minWidth:1e3},children:[Object(E.jsx)(w.a,{children:Object(E.jsxs)(k.a,{children:[Object(E.jsx)(y.a,{align:"left",sx:{width:"60px"},children:"Sr. No."}),Object(E.jsx)(y.a,{align:"center",children:"Order Id"}),Object(E.jsx)(y.a,{align:"center",children:"Total MRP"}),Object(E.jsx)(y.a,{align:"center",children:"Total Saving"}),Object(E.jsx)(y.a,{align:"center",children:"Total Payable"}),Object(E.jsx)(y.a,{align:"center",children:"Order Date"}),Object(E.jsx)(y.a,{align:"center",children:"Transaction Id"}),Object(E.jsx)(y.a,{align:"center",children:"Payment Status"}),Object(E.jsx)(y.a,{align:"center",children:"Status"}),Object(E.jsx)(y.a,{align:"center",sx:{width:"200px"},children:"Action"})]})}),Object(E.jsx)(P.a,{children:W?W.slice(S*A,S*A+A).map((function(e,a){return Object(E.jsxs)(k.a,{children:[Object(E.jsx)(y.a,{align:"center",children:a+1}),Object(E.jsx)(y.a,{align:"center",children:Object(E.jsx)(s.b,{to:"/dashboard/order-history/purchase-details/".concat(e.order_id),children:e.hash_order_id})}),Object(E.jsx)(y.a,{align:"center",children:e.total_mrp}),Object(E.jsx)(y.a,{align:"center",children:e.total_savings}),Object(E.jsx)(y.a,{align:"center",children:e.total_payable}),Object(E.jsx)(y.a,{align:"center",children:R()(e.created_at).format("DD/MM/YYYY")}),Object(E.jsx)(y.a,{align:"center",children:e.transaction_id?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Y,{bgcolor:u,children:e.transaction_id})}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Y,{bgcolor:n,onClick:function(){return function(e,t,n){var a=function(){var i=Object(c.a)(Object(r.a)().mark((function c(){var i,o;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.fire({title:"Order Id: ".concat(n," "),focusConfirm:!1,html:'\n        <input class="swal2-input" id="transactionId" type="text" placeholder="Transaction Id..." style="width: 80%;"/><br />\n      ',icon:"success",showCancelButton:!0,cancelButtonColor:"grey",confirmButtonText:"Update!",confirmButtonColor:"green",allowOutsideClick:!1,preConfirm:function(){return{transactionId:document.getElementById("transactionId").value}}});case 2:if(i=r.sent,!((o=i&&i.value||i.dismiss)&&o.transactionId||"cancel"===o)){r.next=14;break}if(""!==o.transactionId){r.next=11;break}return r.next=8,h.a.fire({icon:"error",title:"Transaction Id is required!"});case 8:a(),r.next=12;break;case 11:if("cancel"!==o&&i.isConfirmed)try{l.a.get("/sanctum/csrf-cookie").then((function(n){l.a.post("/api/client/update-order-trans-id",{row_id:e,order_id:t,transaction_id:i.value.transactionId}).then((function(t){if(200===t.data.response_code){var n=t.data.data;q(W.map((function(t){return t.id===e?n:t}))),b()({title:"Done!",text:t.data.message,icon:"success"})}else t.data.response_code,b()({title:"Errors!",text:t.data.message,icon:"error"});K(!1)})).catch((function(e){K(!1),console.error(e)}))}))}catch(c){K(!1)}case 12:r.next=17;break;case 14:return r.next=16,h.a.fire({icon:"error",title:"Please enter payment transaction Id!"});case 16:a();case 17:case"end":return r.stop()}}),c)})));return function(){return i.apply(this,arguments)}}();a()}(e.id,e.order_id,e.hash_order_id)},children:"Update Trnx Id"})})}),Object(E.jsx)(y.a,{align:"center",children:function(){switch(e.payment_status){case"success":return Object(E.jsx)(Y,{bgcolor:d,children:"Success"});case"pending":return Object(E.jsx)(Y,{bgcolor:i,children:"Pending"});case"failed":return Object(E.jsx)(Y,{bgcolor:t,children:"Failed"});default:return null}}()}),Object(E.jsx)(y.a,{align:"center",children:function(){switch(e.status){case"pending":return Object(E.jsx)(Y,{bgcolor:i,children:"Pending"});case"failed":return Object(E.jsx)(Y,{bgcolor:t,children:"Failed"});case"cancelled":return Object(E.jsx)(Y,{bgcolor:t,children:"Cancelled"});case"completed":return Object(E.jsx)(Y,{bgcolor:n,children:"Completed"});case"processing":return Object(E.jsx)(Y,{bgcolor:u,children:"Processing"});case"ready_to_ship":return Object(E.jsx)(Y,{bgcolor:u,children:"Ready To Ship"});case"shipped":return Object(E.jsx)(Y,{bgcolor:u,children:"Shipped"});case"delivered":return Object(E.jsx)(Y,{bgcolor:d,children:"Delivered"});case"return":return Object(E.jsx)(Y,{bgcolor:p,children:"Return"});case"return_initiated":return Object(E.jsx)(Y,{bgcolor:p,children:"Return Initiated"});case"refund":return Object(E.jsx)(Y,{bgcolor:t,children:"Refunded"});default:return null}}()}),Object(E.jsxs)(y.a,{title:"View",align:"right",sx:{width:"200px"},children:[function(){switch(e.status){case"pending":case"completed":return Object(E.jsx)(C.a,{title:"Order Cancel",onClick:function(t){return Q(e.id,e.hash_order_id)},color:"error",variant:"contained",size:"small",sx:{m:.5},children:"Order Cancel"});case"failed":case"cancelled":case"processing":case"ready_to_ship":case"shipped":case"return":case"refund":default:return null;case"delivered":return e.return_valid?Object(E.jsx)(C.a,{title:"Order Return",onClick:function(t){return function(e,n){var a=function(){var i=Object(c.a)(Object(r.a)().mark((function c(){var i,o;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.a.fire({title:"Order Id: ".concat(n," "),focusConfirm:!1,html:'\n        <div style="text-align: left;  padding:0px 20px;">\n          <br />\n          <p>Reason of Returning</p>\n          <div class="form-check">\n                <input class="form-check-input" type="checkbox" value="expired" id="product_expire">\n                <label class="form-check-label" for="product_expire">\n                  Product received is expired.\n                </label>\n          </div>\n          <div class="form-check">\n                <input class="form-check-input" type="checkbox" value="damaged" id="product_damaged">\n                <label class="form-check-label" for="product_damaged">\n                  Product is damaged.\n                </label>\n          </div>\n        </div>\n        <br />\n        <br />\n      ',icon:"success",showCancelButton:!0,cancelButtonColor:"grey",confirmButtonText:"Submit!",confirmButtonColor:"green",allowOutsideClick:!1,preConfirm:function(){return{product_expire:document.getElementById("product_expire").checked?document.getElementById("product_expire").value:"",product_damaged:document.getElementById("product_damaged").checked?document.getElementById("product_damaged").value:""}}});case 2:if(i=r.sent,""!==(o=i&&i.value||i.dismiss).product_expire||""!==o.product_damaged){r.next=10;break}return r.next=7,h.a.fire({icon:"error",title:"Select Reason of Returning!"});case 7:a(),r.next=11;break;case 10:if("cancel"!==o&&i.isConfirmed)try{l.a.get("/sanctum/csrf-cookie").then((function(t){l.a.post("/api/client/return-order",{row_id:e,product_expire:i.value.product_expire,product_damaged:i.value.product_damaged}).then((function(e){if(200===e.data.response_code){var t=e.data.data;q(W.map((function(e){return e.order_id===n?t:e}))),b()({title:"Done!",text:e.data.message,icon:"success"})}else e.data.response_code,b()({title:"Errors!",text:e.data.message,icon:"error"});K(!1)})).catch((function(e){K(!1),console.error("inner",e)}))})).catch((function(e){K(!1),console.error("outer",e)}))}catch(t){console.error("mostouter",t),K(!1)}case 11:case"end":return r.stop()}}),c)})));return function(){return i.apply(this,arguments)}}();a()}(e.id,e.hash_order_id)},color:"info",variant:"contained",size:"small",sx:{m:.5},children:"Order Return"}):null}}(),Object(E.jsx)(C.a,{component:s.b,to:"/dashboard/order-history/purchase-detail/".concat(e.id),color:"primary",variant:"outlined",size:"small",sx:{m:.5},children:"View"})]})]},a)})):Object(E.jsx)(k.a,{children:Object(E.jsx)(y.a,{align:"center",colSpan:10,children:Object(E.jsx)(I.a,{})})})})]}),W?Object(E.jsx)(B.a,{sx:{px:2},page:S,component:"div",rowsPerPage:A,count:W.length,onPageChange:function(e,t){z(t)},rowsPerPageOptions:[5,10,25],onRowsPerPageChange:function(e){J(+e.target.value),z(0)},nextIconButtonProps:{"aria-label":"Next Page"},backIconButtonProps:{"aria-label":"Previous Page"}}):Object(E.jsx)(E.Fragment,{})]})})]})]})})}}}]);
//# sourceMappingURL=10.94e5e8ea.chunk.js.map