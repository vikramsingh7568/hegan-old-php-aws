(this["webpackJsonpreact-hegan-client"]=this["webpackJsonpreact-hegan-client"]||[]).push([[11],{530:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(24),i=a(31),s=a(7),c=a(4),l=a(37),o=a(2),d=a(502),m=a(506),_=a(498),u=a(499),b=a(487),p=a(465),j=a(500),x=a(489),h=a(484),y=a(482),g=a(483),q=a(478),O=a(485),f=a(535),v=a(507),F=a(508),B=a(509),C=a(510),I=a(476),k=a(421),N=a(422),S=(a(43),a(48)),T=a(20),z=a.n(T),W=a(58),w=a(23),A=a(16),D=a(18),P=a(32),R=a.n(P),E=a(52),M=a(1),G=Object(k.a)(N.a)((function(){return{display:"flex",alignItems:"center"}})),Q=Object(k.a)(G)((function(){return{justifyContent:"center"}})),H=(Object(k.a)(Q)((function(){return{height:"100%",padding:"32px",background:"rgba(0, 0, 0, 0.01)"}})),Object(k.a)("div")((function(e){var t,a=e.theme;return t={margin:"30px"},Object(c.a)(t,a.breakpoints.down("sm"),{margin:"16px"}),Object(c.a)(t,"& .breadcrumb",Object(c.a)({marginBottom:"30px"},a.breakpoints.down("sm"),{marginBottom:"16px"})),t}))),J=Object(k.a)(m.a)((function(){return{minWidth:400,whiteSpace:"pre","& small":{width:50,height:15,borderRadius:500,boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},"& td":{borderBottom:"none"},"& td:first-of-type":{paddingLeft:"16px !important"}}})),U={product_name:"",description:"",category_id:"",brand_name:"",unit_packing:"",expiry_date:"",available_qty:"",hsn_sac_code:"",batch_no:"",mrp:"",product_image:"",min_qty:"",min_qty_discount:"",min_qty_bonus_deal:"",min_qty_trade_rate:"",min_qty_net_rate:"",madicine_tax_class:"",min_qty_margin_percentage:"",status:"pending",tax_category_id:""},V=D.c().shape({product_name:D.d().min(2,"Product Name must be 10 digit length").required("Product Name is required!"),category_id:D.d().required("Category is required!"),brand_name:D.d().required("Brand is required!"),expiry_date:D.d().required("Expiry Date is required!"),available_qty:D.b().required("Available Quantity is required!"),hsn_sac_code:D.d().required("HSN/SAC is required!"),mrp:D.b().required("MRP is required!"),min_qty:D.b().required("Quantity is required!"),min_qty_discount:D.b().required("Discount (%) is required!"),min_qty_bonus_deal:D.d().required("Bonus (Deal) is required!"),min_qty_trade_rate:D.b().required("Trade Rate is required!"),tax_category_id:D.b().required("Tax Category is required!")});t.default=function(){var e=Object(l.c)(),t=(Object(S.a)().register,Object(w.f)()),a=Object(o.useState)(!1),m=Object(s.a)(a,2),k=m[0],T=m[1],D=Object(o.useState)(!1),P=Object(s.a)(D,2),G=P[0],Q=P[1],L=Object(o.useState)(!1),K=Object(s.a)(L,2),X=K[0],Y=K[1],Z=Object(o.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(o.useState)(U),ne=Object(s.a)(ae,2),re=ne[0],ie=ne[1];Object(o.useEffect)((function(){se()}),[]);var se=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,e.next=4,z.a.get("/sanctum/csrf-cookie").then((function(e){z.a.post("/api/client/get-brands").then((function(e){200===e.data.response_code?Y(e.data.data):e.data.response_code,T(!1)})).catch((function(e){T(!1),console.error(e)})),z.a.post("/api/client/get-categories").then((function(e){200===e.data.response_code?Q(e.data.data):e.data.response_code,T(!1)})).catch((function(e){T(!1),console.error(e)})),z.a.post("/api/client/get-tax-categories").then((function(e){200===e.data.response_code?te(e.data.data):e.data.response_code,T(!1)})).catch((function(e){T(!1),console.error(e)}))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),T(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),ce=function(e,t){var a=0,n=0,r="",i=0,s=0,c=0,l="";switch(e.target.name){case"min_qty":a=parseInt(e.target.value),n=t.min_qty_discount?parseInt(t.min_qty_discount):0,r=t.min_qty_bonus_deal?t.min_qty_bonus_deal:0,i=t.min_qty_trade_ratep?parseInt(t.min_qty_trade_rate):0;break;case"min_qty_discount":n=parseInt(e.target.value),a=t.min_qty?parseInt(t.min_qty):0,r=t.min_qty_bonus_deal?t.min_qty_bonus_deal:0,i=t.min_qty_trade_rate?parseInt(t.min_qty_trade_rate):0;break;case"min_qty_bonus_deal":r=e.target.value,a=t.min_qty?parseInt(t.min_qty):0,n=t.min_qty_discount?parseInt(t.min_qty_discount):0,i=t.min_qty_trade_rate?parseInt(t.min_qty_trade_rate):0;break;case"min_qty_trade_rate":i=parseInt(e.target.value),a=t.min_qty?parseInt(t.min_qty):0,n=t.min_qty_discount?parseInt(t.min_qty_discount):0,r=t.min_qty_bonus_deal;break;case"tax_category_id":l=parseInt(e.target.value),a=t.min_qty?parseInt(t.min_qty):0,n=t.min_qty_discount?parseInt(t.min_qty_discount):0,r=t.min_qty_bonus_deal?t.min_qty_bonus_deal:0,i=t.min_qty_trade_rate?parseInt(t.min_qty_trade_rate):0}var o=0,d=0,m="";if(a&&i)if(d=a*i,""==r||0==r||Number.isInteger(r))o=d-d*n/100;else if(r)if(m=(r=r.replace(/[\(\)]/g,"")).split("+"),console.log("dealType----:"+m+"dealType.length"+m.length),m.length>1){var _=parseInt(m[0]),u=parseInt(m[1]),b=d-d*(u/(_+u)*100)/100;o=b-b*n/100}else o=d-d*n/100;var p=0;return""!==l&&(s=parseFloat(ee[l].igst),c=parseFloat(ee[l].cess),p=s&&c?s+c:s),o+o*p/100},le=function(e){ie(Object(n.a)(Object(n.a)({},re),{},Object(c.a)({},e.target.name,e.target.files[0])))};return Object(M.jsxs)(H,{className:"add-medicine",children:[Object(M.jsx)(N.a,{className:"breadcrumb",children:Object(M.jsx)(E.a,{routeSegments:[{name:"dashboard",path:"/dashboard"},{name:"Add Medicine"}]})}),Object(M.jsxs)(_.a,{className:"card",children:[Object(M.jsx)(u.a,{title:"Add Medicine",titleTypographyProps:{variant:"h4",fontSize:"16px",fontWeight:"600",textTransform:"uppercase",textAlign:"center"},action:Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(b.a,{title:"Back",component:A.b,to:"/dashboard/medicine/list",color:"inherit",variant:"outlined",size:"small",sx:{m:.5},children:"Back"})})}),Object(M.jsx)(p.a,{}),Object(M.jsx)(j.a,{children:Object(M.jsx)(W.a,{onSubmit:function(e,a){console.log(a),function(e,a){T(!0);try{z.a.get("/sanctum/csrf-cookie").then((function(n){var r=new FormData;for(var i in e)"product_image"===i?r.append(i,re[i]):e[i]?r.append(i,e[i]):r.append(i,"");z.a.post("/api/client/add-medicine-stock",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200===e.data.response_code?(R()({title:"Good job!",text:e.data.message,icon:"success"}),t("/dashboard/medicine/list")):401==e.data.response_code||"401"==e.data.response_code?(R()({title:"Warning!",text:e.data.message,icon:"warning"}),a.setErrors(e.data.errors)):a.setErrors(e.data.errors),T(!1)})).catch((function(e){console.error(e)}))}))}catch(n){console.log(n),T(!1)}}(e,a)},initialValues:U,validationSchema:V,enableReinitialize:!0,children:function(t){var a=t.values,r=t.errors,i=t.touched,s=t.handleChange,c=t.handleBlur,l=t.handleSubmit,o=t.setFieldValue;t.field;return Object(M.jsxs)("form",{onSubmit:l,children:[Object(M.jsxs)(x.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:[Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"product_name",className:"form-label",children:"Product Name"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"text",name:"product_name",variant:"outlined",onBlur:c,value:a.product_name,onChange:s,helperText:i.product_name&&r.product_name,error:Boolean(r.product_name&&i.product_name),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"category_id",className:"form-label",children:"Category"}),Object(M.jsx)(g.a,{fullWidth:!0,sx:{mb:3},size:"small",children:Object(M.jsxs)(q.a,{displayEmpty:!0,labelId:"status-label",id:"category_id",name:"category_id",value:a.category_id,onChange:s,variant:"outlined",onBlur:c,error:Boolean(r.category_id&&i.category_id),children:[Object(M.jsx)(O.a,{value:"",children:"Select Category"},"sg"),G&&G.map((function(e){return Object(M.jsx)(O.a,{value:e.id,children:e.name},e.id)}))]})})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"brand_id",className:"form-label",children:"Brand"}),Object(M.jsx)(g.a,{fullWidth:!0,sx:{mb:3},size:"small",children:X&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(f.a,{freeSolo:!0,size:"small",id:"brand_name",options:X&&X.map((function(e){return e.name})),renderInput:function(e){return Object(M.jsx)(y.a,Object(n.a)({onChange:s,onBlur:c,name:"brand_name",variant:"outlined",value:a.brand_name,helperText:i.unit_packing&&r.unit_packing,error:Boolean(r.brand_name&&i.brand_name)},e))}}),r.brand_name&&i.brand_name&&Object(M.jsx)("div",{style:{color:"#ff3d57"},children:"".concat(r.brand_name)})]})}),Object(M.jsx)("label",{htmlFor:"unit_packing",className:"form-label",children:"Unit Packing"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"number",name:"unit_packing",variant:"outlined",onBlur:c,value:a.unit_packing,onChange:s,helperText:i.unit_packing&&r.unit_packing,error:Boolean(r.unit_packing&&i.unit_packing),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,lg:6,children:[Object(M.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),Object(M.jsx)("br",{}),Object(M.jsx)(y.a,{fullWidth:!0,multiline:!0,minRows:6,size:"small",type:"text",name:"description",variant:"outlined",onBlur:c,value:a.description,onChange:s,sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"date",name:"expiry_date",variant:"outlined",onBlur:c,value:a.expiry_date,onChange:s,helperText:i.expiry_date&&r.expiry_date,error:Boolean(r.expiry_date&&i.expiry_date),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"available_qty",className:"form-label",children:"Available Quantity"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"number",name:"available_qty",variant:"outlined",onBlur:c,value:a.available_qty,onChange:s,helperText:i.available_qty&&r.available_qty,error:Boolean(r.available_qty&&i.available_qty),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"hsn_sac_code",className:"form-label",children:"HSN/SAC Code"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"text",name:"hsn_sac_code",variant:"outlined",onBlur:c,value:a.hsn_sac_code,onChange:s,helperText:i.hsn_sac_code&&r.hsn_sac_code,error:Boolean(r.hsn_sac_code&&i.hsn_sac_code),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)("label",{htmlFor:"batch_no",className:"form-label",children:"Batch No."}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"text",name:"batch_no",variant:"outlined",onBlur:c,value:a.batch_no,onChange:s,helperText:i.batch_no&&r.batch_no,error:Boolean(r.batch_no&&i.batch_no),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"mrp",className:"form-label",children:"MRP"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"number",name:"mrp",variant:"outlined",onBlur:c,value:a.mrp,onChange:function(e){s(e);var t=parseFloat(ce(e,a)),n=parseInt(a.mrp),r=(n-t)*n/100;o("min_qty_net_rate",t.toFixed(2)),o("min_qty_margin_percentage",r.toFixed(2))},helperText:i.mrp&&r.mrp,error:Boolean(r.mrp&&i.mrp),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)("label",{htmlFor:"product_image",className:"form-label",children:"Upload Image"}),Object(M.jsx)(g.a,{fullWidth:!0,sx:{mb:3},children:Object(M.jsx)("input",{id:"upload-photo",name:"product_image",type:"file",onChange:le})}),r.product_image&&i.product_image&&Object(M.jsx)("div",{style:{color:"#ff3d57"},children:"".concat(r.product_image)})]})]}),Object(M.jsxs)(x.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:[Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"min_qty",className:"form-label",children:"Quantity"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"number",name:"min_qty",variant:"outlined",onBlur:c,value:a.min_qty,onChange:function(e){s(e);var t=parseFloat(ce(e,a)),n=parseInt(a.mrp),r=(n-t)*n/100;o("min_qty_net_rate",t.toFixed(2)),o("min_qty_margin_percentage",r.toFixed(2))},helperText:i.min_qty&&r.min_qty,error:Boolean(r.min_qty&&i.min_qty),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"min_qty_discount",className:"form-label",children:"Discount (%)"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"number",name:"min_qty_discount",variant:"outlined",onBlur:c,value:a.min_qty_discount,onChange:function(e){s(e);var t=parseFloat(ce(e,a)),n=parseInt(a.mrp),r=(n-t)*n/100;o("min_qty_net_rate",t.toFixed(2)),o("min_qty_margin_percentage",r.toFixed(2))},helperText:i.min_qty_discount&&r.min_qty_discount,error:Boolean(r.min_qty_discount&&i.min_qty_discount),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"min_qty_bonus_deal",className:"form-label",children:"Bonus (Deal)"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"text",name:"min_qty_bonus_deal",variant:"outlined",onBlur:c,value:a.min_qty_bonus_deal,onChange:function(e){s(e);var t=parseFloat(ce(e,a)),n=parseInt(a.mrp),r=(n-t)*n/100;o("min_qty_net_rate",t.toFixed(2)),o("min_qty_margin_percentage",r.toFixed(2))},helperText:i.min_qty_bonus_deal&&r.min_qty_bonus_deal,error:Boolean(r.min_qty_bonus_deal&&i.min_qty_bonus_deal),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(h.a,{required:!0,htmlFor:"min_qty_trade_rate",className:"form-label",children:"Trade Rate"}),Object(M.jsx)(y.a,{fullWidth:!0,size:"small",type:"number",name:"min_qty_trade_rate",variant:"outlined",onBlur:c,value:a.min_qty_trade_rate,onChange:function(e){s(e);var t=parseFloat(ce(e,a)),n=parseInt(a.mrp),r=(n-t)*n/100;o("min_qty_net_rate",t.toFixed(2)),o("min_qty_margin_percentage",r.toFixed(2))},helperText:i.min_qty_trade_rate&&r.min_qty_trade_rate,error:Boolean(r.min_qty_trade_rate&&i.min_qty_trade_rate),sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)("label",{htmlFor:"min_qty_net_rate",className:"form-label",children:"Net Rate"}),Object(M.jsx)(y.a,{fullWidth:!0,disabled:!0,size:"small",type:"text",name:"min_qty_net_rate",variant:"outlined",onBlur:c,value:a.min_qty_net_rate,onChange:s,sx:{mb:3}})]}),Object(M.jsxs)(x.a,{item:!0,sm:6,lg:2,xs:12,children:[Object(M.jsx)("label",{htmlFor:"min_qty_margin_percentage",className:"form-label",children:"Margin%"}),Object(M.jsx)(y.a,{fullWidth:!0,disabled:!0,size:"small",type:"text",name:"min_qty_margin_percentage",variant:"outlined",onBlur:c,value:a.min_qty_margin_percentage,onChange:s,sx:{mb:3}})]})]}),Object(M.jsx)("h4",{style:{color:e.palette.primary.main,fontSize:"18px"},children:"Tax Category"}),Object(M.jsx)(x.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:Object(M.jsx)(x.a,{item:!0,sm:12,xs:12,lg:8,children:Object(M.jsxs)(N.a,{overflow:"auto",children:[Object(M.jsxs)(J,{children:[Object(M.jsx)(v.a,{children:Object(M.jsxs)(F.a,{children:[Object(M.jsx)(B.a,{}),Object(M.jsx)(B.a,{children:"CGST"}),Object(M.jsx)(B.a,{children:"SGST"}),Object(M.jsx)(B.a,{children:"IGST"}),Object(M.jsx)(B.a,{children:"CESS"})]})}),Object(M.jsx)(C.a,{children:ee&&ee.map((function(e,t){return Object(M.jsxs)(F.a,{children:[Object(M.jsx)(B.a,{children:Object(M.jsx)(I.a,{checked:a.tax_category_id==e.id,onChange:function(e){s(e);var t=parseFloat(ce(e,a)),n=parseInt(a.mrp),r=(n-t)*n/100;o("min_qty_net_rate",t.toFixed(2)),o("min_qty_margin_percentage",r.toFixed(2))},value:e.id,name:"tax_category_id",inputProps:{"aria-label":"A"}})}),Object(M.jsx)(B.a,{children:e.cgst}),Object(M.jsx)(B.a,{children:e.sgst}),Object(M.jsx)(B.a,{children:e.igst}),Object(M.jsx)(B.a,{children:e.cess})]},t)}))})]}),r.tax_category_id&&i.tax_category_id&&Object(M.jsx)("div",{style:{color:"#ff3d57"},children:"".concat(r.tax_category_id)})]})})}),Object(M.jsx)(x.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:Object(M.jsx)(x.a,{item:!0,sm:6,xs:12,lg:2,children:Object(M.jsx)(d.a,{fullWidth:!0,type:"submit",color:"primary",loading:k,variant:"contained",sx:{mb:2,mt:3},children:"Save"})})})]})}})})]})]})}}}]);
//# sourceMappingURL=11.0969c519.chunk.js.map