(this["webpackJsonpreact-hegan-client"]=this["webpackJsonpreact-hegan-client"]||[]).push([[12],{531:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a(24),i=a(31),s=a(7),c=a(4),l=a(37),o=a(2),d=a(23),m=a(16),_=a(502),u=a(506),b=a(498),j=a(499),p=a(487),x=a(465),h=a(500),y=a(489),g=a(484),O=a(482),q=a(483),f=a(478),v=a(485),F=a(535),B=a(507),C=a(508),I=a(509),k=a(510),N=a(476),S=a(421),T=a(422),z=a(58),W=a(48),w=a(20),P=a.n(w),D=a(18),R=a(32),A=a.n(R),E=a(52),M=a(1),G=Object(S.a)(T.a)((function(){return{display:"flex",alignItems:"center"}})),Q=Object(S.a)(G)((function(){return{justifyContent:"center"}})),U=(Object(S.a)(Q)((function(){return{height:"100%",padding:"32px",background:"rgba(0, 0, 0, 0.01)"}})),Object(S.a)("div")((function(e){var t,a=e.theme;return t={margin:"30px"},Object(c.a)(t,a.breakpoints.down("sm"),{margin:"16px"}),Object(c.a)(t,"& .breadcrumb",Object(c.a)({marginBottom:"30px"},a.breakpoints.down("sm"),{marginBottom:"16px"})),t}))),H=Object(S.a)(u.a)((function(){return{minWidth:400,whiteSpace:"pre","& small":{width:50,height:15,borderRadius:500,boxShadow:"0 0 2px 0 rgba(0, 0, 0, 0.12), 0 2px 2px 0 rgba(0, 0, 0, 0.24)"},"& td":{borderBottom:"none"},"& td:first-of-type":{paddingLeft:"16px !important"}}})),J={product_name:"",description:"",category_id:"",brand_name:"",unit_packing:"",expiry_date:"",available_qty:"",hsn_sac_code:"",batch_no:"",mrp:"",product_image:"",min_qty:"",min_qty_discount:"",min_qty_bonus_deal:"",min_qty_trade_rate:"",min_qty_net_rate:"",min_qty_margin_percentage:"",status:"pending",tax_category_id:""},V=D.c().shape({product_name:D.d().min(2,"Product Name must be 10 digit length").required("Product Name is required!"),category_id:D.d().required("Category is required!"),brand_name:D.d().required("Brand is required!"),expiry_date:D.d().required("Expiry Date is required!"),available_qty:D.b().required("Available Quantity is required!"),hsn_sac_code:D.d().required("HSN/SAC is required!"),mrp:D.b().required("MRP is required!"),min_qty:D.b().required("Quantity is required!"),min_qty_discount:D.b().required("Discount (%) is required!"),min_qty_bonus_deal:D.d().required("Bonus (Deal) is required!"),min_qty_trade_rate:D.b().required("Trade Rate is required!"),tax_category_id:D.b().required("Tax Category is required!")});t.default=function(){var e=Object(d.g)().row_id,t=Object(l.c)(),a=(Object(W.a)().register,Object(d.f)()),u=Object(o.useState)(!1),S=Object(s.a)(u,2),w=S[0],D=S[1],R=Object(o.useState)(!1),G=Object(s.a)(R,2),Q=G[0],L=G[1],K=Object(o.useState)(!1),X=Object(s.a)(K,2),Y=X[0],Z=X[1],$=Object(o.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ae=ee[1],ne=Object(o.useState)(J),re=Object(s.a)(ne,2),ie=re[0],se=re[1],ce=Object(o.useState)(J),le=Object(s.a)(ce,2),oe=le[0],de=le[1];Object(o.useEffect)((function(){me()}),[]);var me=function(){var t=Object(i.a)(Object(r.a)().mark((function t(){return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!0),t.prev=1,t.next=4,P.a.get("/sanctum/csrf-cookie").then((function(t){P.a.post("/api/client/get-brands").then((function(e){200===e.data.response_code?Z(e.data.data):e.data.response_code,D(!1)})).catch((function(e){D(!1),console.error(e)})),P.a.post("/api/client/get-categories").then((function(e){200===e.data.response_code?L(e.data.data):e.data.response_code,D(!1)})).catch((function(e){D(!1),console.error(e)})),P.a.post("/api/client/get-tax-categories").then((function(e){200===e.data.response_code?ae(e.data.data):e.data.response_code,D(!1)})).catch((function(e){D(!1),console.error(e)})),P.a.post("/api/client/get-medicine",{row_id:e}).then((function(e){200===e.data.response_code?se(e.data.data):e.data.response_code,D(!1)})).catch((function(e){D(!1),console.error(e)}))}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),D(!1);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}(),_e=function(e,t){var a=0,n=0,r="",i=0,s=0,c=0,l="";switch(e.target.name){case"min_qty":a=parseInt(e.target.value),n=t.min_qty_discount?parseInt(t.min_qty_discount):0,r=t.min_qty_bonus_deal?t.min_qty_bonus_deal:0,i=t.min_qty_trade_ratep?parseInt(t.min_qty_trade_rate):0;break;case"min_qty_discount":n=parseInt(e.target.value),a=t.min_qty?parseInt(t.min_qty):0,r=t.min_qty_bonus_deal?t.min_qty_bonus_deal:0,i=t.min_qty_trade_rate?parseInt(t.min_qty_trade_rate):0;break;case"min_qty_bonus_deal":r=e.target.value,a=t.min_qty?parseInt(t.min_qty):0,n=t.min_qty_discount?parseInt(t.min_qty_discount):0,i=t.min_qty_trade_rate?parseInt(t.min_qty_trade_rate):0;break;case"min_qty_trade_rate":i=parseInt(e.target.value),a=t.min_qty?parseInt(t.min_qty):0,n=t.min_qty_discount?parseInt(t.min_qty_discount):0,r=t.min_qty_bonus_deal;break;case"tax_category_id":l=parseInt(e.target.value),a=t.min_qty?parseInt(t.min_qty):0,n=t.min_qty_discount?parseInt(t.min_qty_discount):0,r=t.min_qty_bonus_deal?t.min_qty_bonus_deal:0,i=t.min_qty_trade_rate?parseInt(t.min_qty_trade_rate):0}var o=0,d=0,m="";if(a&&i)if(d=a*i,""==r||0==r||Number.isInteger(r))o=d-d*n/100;else if(r)if(m=(r=r.replace(/[\(\)]/g,"")).split("+"),console.log("dealType----:"+m+"dealType.length"+m.length),m.length>1){var _=parseInt(m[0]),u=parseInt(m[1]),b=d-d*(u/(_+u)*100)/100;o=b-b*n/100}else o=d-d*n/100;var j=0;return""!==l&&(s=parseFloat(te[l].igst),c=parseFloat(te[l].cess),j=s&&c?s+c:s),o+o*j/100},ue=function(e){de(Object(n.a)(Object(n.a)({},oe),{},Object(c.a)({},e.target.name,e.target.files[0])))};return Object(M.jsxs)(U,{className:"add-medicine",children:[Object(M.jsx)(T.a,{className:"breadcrumb",children:Object(M.jsx)(E.a,{routeSegments:[{name:"dashboard",path:"/dashboard"},{name:"Edit Medicine"}]})}),Object(M.jsxs)(b.a,{className:"card",children:[Object(M.jsx)(j.a,{title:"Edit Medicine",titleTypographyProps:{variant:"h4",fontSize:"16px",fontWeight:"600",textTransform:"uppercase",textAlign:"center"},action:Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(p.a,{title:"Back",component:m.b,to:"/dashboard/medicine/list",color:"inherit",variant:"outlined",size:"small",sx:{m:.5},children:"Back"})})}),Object(M.jsx)(x.a,{}),Object(M.jsx)(h.a,{children:Object(M.jsx)(z.a,{onSubmit:function(t,n){!function(t,n){D(!0);try{P.a.get("/sanctum/csrf-cookie").then((function(r){var i=new FormData;for(var s in t)"product_image"===s?i.append(s,oe[s]):t[s]?i.append(s,t[s]):i.append(s,"");i.append("row_id",e),P.a.post("/api/client/update-medicine-stock",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200===e.data.response_code?(A()({title:"Good job!",text:e.data.message,icon:"success"}),a("/dashboard/medicine/list")):n.setErrors(e.data.errors),D(!1)})).catch((function(e){console.error(e)}))}))}catch(r){console.log(r),D(!1)}}(t,n)},initialValues:ie,enableReinitialize:!0,validationSchema:V,children:function(e){var a,r=e.values,i=e.errors,s=e.touched,l=e.handleChange,o=e.handleBlur,d=e.handleSubmit,m=e.setFieldValue;return Object(M.jsxs)("form",{onSubmit:d,children:[Object(M.jsxs)(y.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:[Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"product_name",className:"form-label",children:"Product Name"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"text",name:"product_name",variant:"outlined",onBlur:o,value:r.product_name,onChange:l,helperText:s.product_name&&i.product_name,error:Boolean(i.product_name&&s.product_name),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"category_id",className:"form-label",children:"Category"}),Object(M.jsx)(q.a,{fullWidth:!0,sx:{mb:3},size:"small",children:Object(M.jsxs)(f.a,{labelId:"status-label",id:"category_id",name:"category_id",onChange:l,variant:"outlined",onBlur:o,value:r.category_id,error:Boolean(i.category_id&&s.category_id),children:[Object(M.jsx)(v.a,{value:"",children:"Select Category"},"sg"),Q&&Q.map((function(e){return Object(M.jsx)(v.a,{value:e.id,children:e.name},e.id)}))]})})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"brand_id",className:"form-label",children:"Brand"}),Object(M.jsx)(q.a,{fullWidth:!0,sx:{mb:3},size:"small",children:Y&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(F.a,{freeSolo:!0,size:"small",id:"brand_name",value:r.brand_name,options:Y&&Y.map((function(e){return e.name})),renderInput:function(e){return Object(M.jsx)(O.a,Object(n.a)({onChange:l,onBlur:o,name:"brand_name",variant:"outlined",value:r.brand_name,helperText:s.unit_packing&&i.unit_packing,error:Boolean(i.brand_name&&s.brand_name)},e))}}),i.brand_name&&s.brand_name&&Object(M.jsx)("div",{style:{color:"#ff3d57"},children:"".concat(i.brand_name)})]})}),Object(M.jsx)("label",{htmlFor:"unit_packing",className:"form-label",children:"Unit Packing"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"number",name:"unit_packing",variant:"outlined",onBlur:o,value:r.unit_packing,onChange:l,helperText:s.unit_packing&&i.unit_packing,error:Boolean(i.unit_packing&&s.unit_packing),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,lg:6,children:[Object(M.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description"}),Object(M.jsx)("br",{}),Object(M.jsx)(O.a,{fullWidth:!0,multiline:!0,minRows:6,size:"small",type:"text",name:"description",variant:"outlined",onBlur:o,value:r.description||"",onChange:l,sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"expiry_date",className:"form-label",children:"Expiry Date"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"date",name:"expiry_date",variant:"outlined",onBlur:o,value:r.expiry_date,onChange:l,helperText:s.expiry_date&&i.expiry_date,error:Boolean(i.expiry_date&&s.expiry_date),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"available_qty",className:"form-label",children:"Available Quantity"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"number",name:"available_qty",variant:"outlined",onBlur:o,value:r.available_qty,onChange:l,helperText:s.available_qty&&i.available_qty,error:Boolean(i.available_qty&&s.available_qty),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"hsn_sac_code",className:"form-label",children:"HSN/SAC Code"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"text",name:"hsn_sac_code",variant:"outlined",onBlur:o,value:r.hsn_sac_code,onChange:l,helperText:s.hsn_sac_code&&i.hsn_sac_code,error:Boolean(i.hsn_sac_code&&s.hsn_sac_code),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)("label",{htmlFor:"batch_no",className:"form-label",children:"Batch No."}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"text",name:"batch_no",variant:"outlined",onBlur:o,value:r.batch_no,onChange:l,helperText:s.batch_no&&i.batch_no,error:Boolean(i.batch_no&&s.batch_no),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"mrp",className:"form-label",children:"MRP"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"number",name:"mrp",variant:"outlined",onBlur:o,value:r.mrp||"",onChange:function(e){l(e);var t=parseFloat(_e(e,r)),a=parseInt(r.mrp),n=(a-t)*a/100;m("min_qty_net_rate",t.toFixed(2)),m("min_qty_margin_percentage",n.toFixed(2))},helperText:s.mrp&&i.mrp,error:Boolean(i.mrp&&s.mrp),sx:{mb:3}})]}),Object(M.jsx)(y.a,{item:!0,sm:6,xs:12})]}),Object(M.jsxs)(y.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:[Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"min_qty",className:"form-label",children:"Quantity"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"number",name:"min_qty",variant:"outlined",onBlur:o,value:r.min_qty,onChange:function(e){l(e);var t=parseFloat(_e(e,r)),a=parseInt(r.mrp),n=(a-t)*a/100;m("min_qty_net_rate",t.toFixed(2)),m("min_qty_margin_percentage",n.toFixed(2))},helperText:s.min_qty&&i.min_qty,error:Boolean(i.min_qty&&s.min_qty),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"min_qty_discount",className:"form-label",children:"Discount (%)"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"number",name:"min_qty_discount",variant:"outlined",onBlur:o,value:r.min_qty_discount,onChange:function(e){l(e);var t=parseFloat(_e(e,r)),a=parseInt(r.mrp),n=(a-t)*a/100;m("min_qty_net_rate",t.toFixed(2)),m("min_qty_margin_percentage",n.toFixed(2))},helperText:s.min_qty_discount&&i.min_qty_discount,error:Boolean(i.min_qty_discount&&s.min_qty_discount),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"min_qty_bonus_deal",className:"form-label",children:"Bonus (Deal)"}),Object(M.jsx)(O.a,{fullWidth:!0,size:"small",type:"text",name:"min_qty_bonus_deal",variant:"outlined",onBlur:o,value:r.min_qty_bonus_deal||"",onChange:function(e){l(e);var t=parseFloat(_e(e,r)),a=parseInt(r.mrp),n=(a-t)*a/100;m("min_qty_net_rate",t.toFixed(2)),m("min_qty_margin_percentage",n.toFixed(2))},helperText:s.min_qty_bonus_deal&&i.min_qty_bonus_deal,error:Boolean(i.min_qty_bonus_deal&&s.min_qty_bonus_deal),sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)(g.a,{required:!0,htmlFor:"min_qty_trade_rate",className:"form-label",children:"Trade Rate"}),Object(M.jsx)(O.a,(a={fullWidth:!0,size:"small",type:"number",name:"min_qty_trade_rate",variant:"outlined",onBlur:o,value:r.min_qty_trade_rate,onChange:l},Object(c.a)(a,"onChange",(function(e){l(e);var t=parseFloat(_e(e,r)),a=parseInt(r.mrp),n=(a-t)*a/100;m("min_qty_net_rate",t.toFixed(2)),m("min_qty_margin_percentage",n.toFixed(2))})),Object(c.a)(a,"helperText",s.min_qty_trade_rate&&i.min_qty_trade_rate),Object(c.a)(a,"error",Boolean(i.min_qty_trade_rate&&s.min_qty_trade_rate)),Object(c.a)(a,"sx",{mb:3}),a))]}),Object(M.jsxs)(y.a,{item:!0,sm:6,xs:12,lg:2,children:[Object(M.jsx)("label",{htmlFor:"min_qty_net_rate",className:"form-label",children:"Net Rate"}),Object(M.jsx)(O.a,{fullWidth:!0,disabled:!0,size:"small",type:"text",name:"min_qty_net_rate",variant:"outlined",onBlur:o,value:r.min_qty_net_rate,onChange:l,sx:{mb:3}})]}),Object(M.jsxs)(y.a,{item:!0,sm:6,lg:2,xs:12,children:[Object(M.jsx)("label",{htmlFor:"min_qty_margin_percentage",className:"form-label",children:"Margin%"}),Object(M.jsx)(O.a,{fullWidth:!0,disabled:!0,size:"small",type:"text",name:"min_qty_margin_percentage",variant:"outlined",onBlur:o,value:r.min_qty_margin_percentage,onChange:l,sx:{mb:3}})]})]}),Object(M.jsx)("h4",{style:{color:t.palette.primary.main,fontSize:"18px"},children:"Tax Category"}),Object(M.jsxs)(y.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:[Object(M.jsx)(y.a,{item:!0,sm:12,xs:12,lg:8,children:Object(M.jsxs)(T.a,{overflow:"auto",children:[Object(M.jsxs)(H,{children:[Object(M.jsx)(B.a,{children:Object(M.jsxs)(C.a,{children:[Object(M.jsx)(I.a,{}),Object(M.jsx)(I.a,{children:"CGST"}),Object(M.jsx)(I.a,{children:"SGST"}),Object(M.jsx)(I.a,{children:"IGST"}),Object(M.jsx)(I.a,{children:"CESS"})]})}),Object(M.jsx)(k.a,{children:te&&te.map((function(e,t){return Object(M.jsxs)(C.a,{children:[Object(M.jsx)(I.a,{children:Object(M.jsx)(N.a,{checked:r.tax_category_id==e.id,onChange:function(e){l(e);var t=parseFloat(_e(e,r)),a=parseInt(r.mrp),n=(a-t)*a/100;m("min_qty_net_rate",t.toFixed(2)),m("min_qty_margin_percentage",n.toFixed(2))},value:e.id,name:"tax_category_id",inputProps:{"aria-label":"A"}})}),Object(M.jsx)(I.a,{children:e.cgst}),Object(M.jsx)(I.a,{children:e.sgst}),Object(M.jsx)(I.a,{children:e.igst}),Object(M.jsx)(I.a,{children:e.cess})]},t)}))})]}),i.tax_category_id&&s.tax_category_id&&Object(M.jsx)("div",{style:{color:"#ff3d57"},children:"".concat(i.tax_category_id)})]})}),Object(M.jsxs)(y.a,{item:!0,sm:12,xs:12,lg:4,style:{textAlign:"center"},children:[Object(M.jsx)("label",{htmlFor:"product_image",className:"form-label",children:"Upload Image"}),r.product_image&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsx)("img",{src:r.product_image,style:{width:"300px",height:"200px"},title:"Product Image"}),Object(M.jsx)("br",{})]}),Object(M.jsx)(q.a,{sx:{mb:3,float:"right"},children:Object(M.jsx)("input",{id:"upload-photo",name:"product_image",type:"file",onChange:ue})}),i.product_image&&s.product_image&&Object(M.jsx)("div",{style:{color:"#ff3d57"},children:"".concat(i.product_image)})]})]}),Object(M.jsx)(y.a,{container:!0,style:{padding:"20px 0px"},spacing:2,children:Object(M.jsx)(y.a,{item:!0,sm:6,xs:12,lg:2,children:Object(M.jsx)(_.a,{fullWidth:!0,type:"submit",color:"primary",loading:w,variant:"contained",sx:{mb:2,mt:3},children:"Update"})})})]})}})})]})]})}}}]);
//# sourceMappingURL=12.8987144a.chunk.js.map